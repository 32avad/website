<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„èµ„æºç›®å½•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .admin-box { border: 2px dashed #ec4899; background: #1f2937; }
    </style>
</head>
<body class="bg-gray-900 text-white font-sans min-h-screen pb-20">

    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="p-6 flex justify-between items-center border-b border-gray-800">
        <h1 class="text-2xl font-bold text-pink-500">èµ„æºé¢„è§ˆç«™</h1>
        <button onclick="toggleAdmin()" class="text-gray-500 text-xs hover:text-white">Admin</button>
    </header>

    <!-- ================= ç®¡ç†å‘˜æ“ä½œåŒº (é»˜è®¤éšè—) ================= -->
    <div id="admin-panel" class="hidden container mx-auto p-4 mt-4">
        <div class="admin-box p-6 rounded-lg">
            <h2 class="text-xl font-bold text-pink-400 mb-4">ğŸ”§ ç®¡ç†å‘˜åå°</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="text" id="in-title" placeholder="å•†å“æ ‡é¢˜ (ä¾‹å¦‚ï¼šæµ·è¾¹å†™çœŸ)" class="bg-gray-700 p-2 rounded text-white w-full">
                <input type="text" id="in-price" placeholder="ä»·æ ¼ (ä¾‹å¦‚ï¼š9.9)" class="bg-gray-700 p-2 rounded text-white w-full">
                <input type="text" id="in-desc" placeholder="æè¿° (ä¾‹å¦‚ï¼šå«50å¼ å›¾)" class="bg-gray-700 p-2 rounded text-white w-full">
                
                <!-- å…³é”®ï¼šå›¾ç‰‡å¿…é¡»æ˜¯é“¾æ¥ -->
                <div class="md:col-span-2">
                    <p class="text-xs text-gray-400 mb-1">å›¾ç‰‡é“¾æ¥ (è¯·å…ˆå°†å›¾ç‰‡ä¸Šä¼ åˆ° GitHub ä»“åº“ï¼Œç‚¹å‡»å›¾ç‰‡è·å–é“¾æ¥å¡«å…¥è¿™é‡Œ)</p>
                    <input type="text" id="in-img" placeholder="ç²˜è´´å›¾ç‰‡é“¾æ¥: https://..." class="bg-gray-700 p-2 rounded text-white w-full">
                </div>
            </div>

            <div class="mt-4 flex gap-4">
                <button onclick="addItem()" class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded font-bold">
                    + æ·»åŠ åˆ°åˆ—è¡¨
                </button>
                <button onclick="exportData()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded font-bold ml-auto">
                    ğŸ’¾ ç”Ÿæˆä¿å­˜ä»£ç 
                </button>
            </div>

            <!-- æ•°æ®å¯¼å‡ºåŒº -->
            <div id="export-area" class="hidden mt-6">
                <p class="text-yellow-400 text-sm mb-2">âš  è¯·å¤åˆ¶ä¸‹æ–¹ä»£ç ï¼Œè¦†ç›–åˆ° <b>data.js</b> æ–‡ä»¶ä¸­ï¼Œç„¶åä¸Šä¼  GitHub å³å¯æ›´æ–°ç½‘ç«™ï¼š</p>
                <textarea id="export-code" class="w-full h-32 bg-black text-green-400 p-4 rounded text-xs font-mono"></textarea>
            </div>
        </div>
    </div>
    <!-- ================= ç®¡ç†å‘˜åŒºåŸŸç»“æŸ ================= -->

    <!-- æ ‡è¯­ -->
    <section class="text-center py-10 px-4">
        <h2 class="text-3xl font-bold mb-2">é€‰è´­æµç¨‹</h2>
        <p class="text-gray-400 text-sm">1. æµè§ˆå•†å“ &nbsp;â†’&nbsp; 2. æˆªå›¾ä½ æƒ³è¦çš„ &nbsp;â†’&nbsp; 3. å‘ç»™æˆ‘ç§èŠä»˜æ¬¾</p>
    </section>

    <!-- å•†å“åˆ—è¡¨ -->
    <div id="product-grid" class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- JS ä¼šæŠŠå•†å“æ¸²æŸ“åœ¨è¿™é‡Œ -->
    </div>

    <!-- å¼•å…¥æ•°æ® -->
    <script src="./data.js"></script>

    <script>
        // å¦‚æœ data.js æ˜¯ç©ºçš„ï¼Œåˆå§‹åŒ–ä¸ºç©ºæ•°ç»„
        if (typeof products === 'undefined') var products = [];

        // é¡µé¢åŠ è½½æ—¶æ¸²æŸ“åˆ—è¡¨
        window.onload = function() {
            render();
        }

        // æ¸²æŸ“å‡½æ•°
        function render() {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = "";

            if (products.length === 0) {
                grid.innerHTML = '<p class="text-gray-500 text-center col-span-full">æš‚æ— å•†å“ï¼Œè¯·ç‚¹å‡»å³ä¸Šè§’ Admin æ·»åŠ ã€‚</p>';
                return;
            }

            products.forEach((item, index) => {
                const card = `
                <div class="bg-gray-800 rounded-lg overflow-hidden border border-gray-700 shadow-xl group">
                    <div class="relative h-56 overflow-hidden bg-black">
                        <img src="${item.img}" class="w-full h-full object-cover group-hover:scale-105 transition duration-500" onerror="this.src='https://via.placeholder.com/400?text=No+Image'">
                        <div class="absolute bottom-0 left-0 bg-pink-600 text-white text-xs px-2 py-1">é¢„è§ˆ</div>
                    </div>
                    <div class="p-4">
                        <h3 class="text-lg font-bold text-white mb-1">${item.title}</h3>
                        <p class="text-gray-400 text-xs mb-3">${item.desc}</p>
                        <div class="flex justify-between items-center border-t border-gray-700 pt-3">
                            <span class="text-xl font-bold text-pink-500">Â¥${item.price}</span>
                            <button onclick="alert('è¯·æˆªå›¾æ­¤å•†å“å‘ç»™åº—ä¸»')" class="text-gray-400 text-xs hover:text-white">è´­ä¹°æ–¹å¼</button>
                        </div>
                        <!-- ç®¡ç†å‘˜åˆ é™¤æŒ‰é’® (ä»…åœ¨ç”Ÿæˆä»£ç æ—¶æœ‰æ•ˆï¼Œç•Œé¢ä¸åšå¤æ‚äº¤äº’) -->
                        <button onclick="deleteItem(${index})" class="admin-only hidden text-red-500 text-xs mt-2 w-full text-right hover:underline">åˆ é™¤æ­¤é¡¹</button>
                    </div>
                </div>`;
                grid.innerHTML += card;
            });

            // å¦‚æœå¤„äºç®¡ç†å‘˜æ¨¡å¼ï¼Œæ˜¾ç¤ºåˆ é™¤æŒ‰é’®
            if(!document.getElementById('admin-panel').classList.contains('hidden')){
                document.querySelectorAll('.admin-only').forEach(el => el.classList.remove('hidden'));
            }
        }

        // åˆ‡æ¢ç®¡ç†å‘˜é¢æ¿
        function toggleAdmin() {
            const pwd = prompt("è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç :");
            // è¿™é‡Œè®¾ç½®ä½ çš„å¯†ç ï¼Œæ¯”å¦‚ '8888'
            if (pwd === '8888') {
                document.getElementById('admin-panel').classList.remove('hidden');
                render(); // é‡æ–°æ¸²æŸ“ä»¥æ˜¾ç¤ºåˆ é™¤æŒ‰é’®
            } else {
                if(pwd) alert("å¯†ç é”™è¯¯");
            }
        }

        // æ·»åŠ å•†å“åˆ°å†…å­˜
        function addItem() {
            const title = document.getElementById('in-title').value;
            const price = document.getElementById('in-price').value;
            const desc = document.getElementById('in-desc').value;
            const img = document.getElementById('in-img').value;

            if (!title || !price || !img) {
                alert("æ ‡é¢˜ã€ä»·æ ¼ã€å›¾ç‰‡é“¾æ¥å¿…å¡«ï¼");
                return;
            }

            // æ·»åŠ åˆ°æ•°ç»„æœ€å‰é¢
            products.unshift({ title, price, desc, img });
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById('in-title').value = '';
            document.getElementById('in-price').value = '';
            document.getElementById('in-desc').value = '';
            document.getElementById('in-img').value = '';

            render();
            alert("å·²æ·»åŠ åˆ°é¢„è§ˆåˆ—è¡¨ï¼è®°å¾—ç‚¹å‡»ã€ç”Ÿæˆä¿å­˜ä»£ç ã€‘å¹¶æ›´æ–°æ–‡ä»¶ã€‚");
        }

        // åˆ é™¤å•†å“
        function deleteItem(index) {
            if(confirm('ç¡®å®šåˆ é™¤å—ï¼Ÿ')) {
                products.splice(index, 1);
                render();
            }
        }

        // ç”Ÿæˆä»£ç 
        function exportData() {
            const json = JSON.stringify(products, null, 4);
            const code = `const products = ${json};`;
            
            const area = document.getElementById('export-area');
            const textarea = document.getElementById('export-code');
            
            area.classList.remove('hidden');
            textarea.value = code;
            textarea.select();
            document.execCommand('copy');
            alert("ä»£ç å·²å¤åˆ¶ï¼\nè¯·æ‰“å¼€ data.js æ–‡ä»¶ï¼Œç²˜è´´è¦†ç›–é‡Œé¢çš„å†…å®¹ï¼Œç„¶åä¸Šä¼  GitHubã€‚");
        }
    </script>
</body>
</html>
